<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blue Egg Bakery</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="../static/script.js" defer></script>
</head>
<body>
    <div id="page-container">
        <div id="content-wrap">
            <header>
                <div>
                    <img src="https://scontent-msp1-1.xx.fbcdn.net/v/t39.30808-6/378759748_1021053258866265_9190996398925317582_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=5f2048&_nc_ohc=3XFeivEGrHIAb4caBmo&_nc_ht=scontent-msp1-1.xx&oh=00_AfA606C-tPeic21oeVtzoqlfvGpo-RHR4PUFwW6yZwrFGA&oe=6618DA6C">
                </div>
                <div>
                    <h1>Blue Egg Bakery</h1>
                <nav class="navbar">
                    <ul>
                        <li><a href="{{ url_for('index') }}">Home</a></li>
                        <li><a href="{{ url_for('index') }}">Menu</a></li>
                        <li><a href="{{ url_for('cart') }}">Cart</a></li>
                        <li><a href="#">About Us</a></li>
                    </ul>
                </nav>
                </div>
            </header>
    
            <div>
                <h1>Shopping Cart</h1>
                <div class="cart-items">
                    {% for item in cart_items %}
                    <div class="cart-item">
                        <img src="{{ item.product.image_url }}" alt="{{ item.product.name }}">
                        <h2>{{ item.product.name }}</h2>
                        <p>Price: ${{ '%.2f' | format(item.product.price) }}</p>
                        <p>Quantity: {{ item.quantity.quantity }}</p>
                        <button class="remove-from-cart" data-product-id="{{ item.product.id }}">Remove from Cart</button>

                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const removeFromCartButtons = document.querySelectorAll('.remove-from-cart');
                                removeFromCartButtons.forEach(button => {
                                    button.addEventListener('click', function(event) {
                                        event.preventDefault();
                                        console.log("Remove Event");
                                        const productId = parseInt(this.dataset.productId);
                                        fetch('/remove-from-cart', {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json'
                                            },
                                            body: JSON.stringify({
                                                product_id: productId
                                            })
                                        })
                                        .then(response => response.json())
                                        .then(data => {
                                            // Log the response message
                                            console.log(data.message);
                                        })
                                        .catch(error => {
                                            // Log any errors that occur during the request
                                            console.error('Error:', error);
                                        });
                                    });
                                });
                            });
                        </script>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <footer>
            <div class="footer-content">
                <div class="contact-info">
                    <p>Contact Us:</p>
                    <p>blueeggbakery@gmail.com</p>
                    <p>(763)441-1911</p>
                    <p>713 Main St NW, Elk River, MN 55330</p>
                </div>
                <div class="social-media">
                    <a href="https://www.facebook.com/BlueEggBakery/"><i class="fab fa-facebook"></i></a>
                </div>
                <div class="quick-links">
                    <ul>
                        <li><a href="about.html" style="text-decoration:none">About Us</a></li>
                        <li><a href="jobs.html" style="text-decoration:none">Jobs</a></li>
                    </ul>
                </div>
            </div>
            <p>&copy; 2024 Blue Egg Bakery</p>
        </footer>
    </div>
</body>
</html>
